var w=Object.defineProperty,b=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var y=(e,t,s)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,l=(e,t)=>{for(var s in t||(t={}))k.call(t,s)&&y(e,s,t[s]);if(m)for(var s of m(t))$.call(t,s)&&y(e,s,t[s]);return e},d=(e,t)=>b(e,C(t));import{d as u,c,a as i,t as a,b as f,F as x,o as r,r as A,e as S,f as q,g as B,h as j}from"./vendor.68b06e04.js";const O=e=>({baseURL:e,headers:{"X-Requested-With":"XMLHttpRequest"}}),_=async(e,t,s,n)=>{try{const o=await e.post(t,s);n&&o.data&&n(o.data)}catch(o){console.error("xhr",o)}};var g=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s};const V=u({props:{section:{type:Object,required:!0},api:{type:Object,required:!0}},data:()=>({type:null}),methods:{async syncCollection(){this.type="sync";let e=d(l({},this.section),{sectionId:this.section.id,[this.api.csrf.name]:this.api.csrf.value});await _(this.api.client,"typesense/sync-collection",e,t=>{this.type=null})},async flushCollection(){this.type="flush";let e=d(l({},this.section),{sectionId:this.section.id,[this.api.csrf.name]:this.api.csrf.value});await _(this.api.client,"typesense/flush-collection",e,t=>{this.type=null})}}}),z={class:"px-6 py-4 whitespace-nowrap flex items-center"},I={class:"px-6 py-4 whitespace-nowrap flex items-center"},L={class:"px-6 py-4 whitespace-nowrap flex items-center"},F={class:"px-6 py-4 whitespace-nowrap flex items-center"},H={class:"px-6 py-2 border-b border-gray-100 space-x-2"},M=i("span",null,"Sync",-1),N={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R=i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E=i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),T=[R,E],U=i("span",null,"Flush",-1),X={key:0,class:"animate-spin ml-1 h-3 w-3 text-white mb-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},D=i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),G=i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),W=[D,G];function J(e,t,s,n,o,v){return r(),c(x,null,[i("div",z,a(e.section.index),1),i("div",I,a(e.section.name),1),i("div",L,a(e.section.type),1),i("div",F,a(e.section.entryCount),1),i("div",H,[i("button",{type:"button",class:"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-700 hover:bg-indigo-900",onClick:t[0]||(t[0]=p=>e.syncCollection())},[M,e.type==="sync"?(r(),c("svg",N,T)):f("",!0)]),i("button",{type:"button",class:"cursor-pointer inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-indigo-700 border border-solid border-indigo-700 hover:text-white hover:bg-indigo-900",onClick:t[1]||(t[1]=p=>e.flushCollection())},[U,e.type==="flush"?(r(),c("svg",X,W)):f("",!0)])])],64)}var K=g(V,[["render",J]]);const P=u({components:{"list-item-section":K},props:{sections:{type:Object,required:!0},apiConfig:{type:Object,required:!0}},data:()=>({api:null}),methods:{createApi(){const e={client:axios.create(O(this.apiConfig.baseUrl)),csrf:this.apiConfig.csrf};this.api=e}},async created(){await this.createApi()}}),Q={class:"rounded-tr-sm rounded-tl-sm"},Y=S('<div class="grid grid-cols-5 rounded-tr-md rounded-tl-md bg-gray-100"><div class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Index </div><div class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Section </div><div class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Type </div><div class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Total Entries </div><div class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Sync </div></div>',1),Z={class:"grid grid-cols-5"};function ee(e,t,s,n,o,v){const p=q("list-item-section");return r(),c("section",Q,[Y,i("div",Z,[(r(!0),c(x,null,A(e.sections,h=>(r(),B(p,{section:h,key:h.id,api:e.api},null,8,["section","api"]))),128))])])}var te=g(P,[["render",ee]]);const se=u({components:{"grid-sections":te}}),ie=async()=>j(se).mount("#typesense-collections");ie().then(e=>{});
//# sourceMappingURL=typesense-collections.e3f4c2e8.js.map
